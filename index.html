<script>
  function storeRedirect() {
    if (["iPad", "iPhone", "iPod"].indexOf(navigator.platform) >= 0) {
      window.location.href =
        "https://apps.apple.com/sg/app/singlife-invest-save-insure/id1485702405";
    } else {
      window.location.href =
        "https://play.google.com/store/apps/details?id=ph.com.singlife.app";
    }
  }

  function appRedirect() {
    const params = new Proxy(new URLSearchParams(window.location.search), {
      get: (searchParams, prop) => searchParams.get(prop),
    });

    const { screen, action } = params;
    window.location.href = `singlife://${screen}?action=${action}`;
  }

  function runDeeplink() {
    var now = new Date().valueOf();
    setTimeout(function () {
      if (new Date().valueOf() - now > 100) return;
      storeRedirect();
    }, 50);
    appRedirect();
  }

  runDeeplink();
</script>
