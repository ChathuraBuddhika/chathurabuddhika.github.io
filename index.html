<script>
    // Store Redirection
    function storeRedirection() {
        if (['iPad', 'iPhone', 'iPod'].indexOf(navigator.platform) >= 0) {
            window.location = "https://apps.apple.com/sg/app/singlife-invest-save-insure/id1485702405";
        } else {
            window.location = "https://play.google.com/store/apps/details?id=com.singlife.mobile";
        }
    }

    // DeepLink App Redirection
    function appRedirection(screen, param) {
        window.location.replace(`singlifeph://--/${params.screen}?action=${params.action}`);
    }

    // Check DeepLink App Reachability
    function checkDeepLinkCanReach() {
        const params = new Proxy(new URLSearchParams(window.location.search), {
            get: (searchParams, prop) => searchParams.get(prop),
        });
        const request = new XMLHttpRequest();
        request.open('GET', `singlifeph://--/${params.screen}?action=${params.action}`, false);
        request.onload = function () {
            if (request.status >= 200 && request.status < 400) {
                // Success!
                // appRedirection();
                alert('App is installed');
            } else {
                alert('App is not installed');
                // We reached our target server, but it returned an error
                // storeRedirection();
            }
        };
    }

    checkDeepLinkCanReach();
</script>
