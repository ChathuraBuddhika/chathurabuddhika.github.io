<script>

    // Store Redirection
    function storeRedirection() {
        if (['iPad', 'iPhone', 'iPod'].indexOf(navigator.platform) >= 0) {
            window.location.href = "https://apps.apple.com/sg/app/singlife-invest-save-insure/id1485702405";
        } else {
            window.location.href = "https://play.google.com/store/apps/details?id=ph.com.singlife.app";
        }
    }

    // DeepLink App Redirection
    function appRedirection() {
       const params = new Proxy(new URLSearchParams(window.location.search), {
                        get: (searchParams, prop) => searchParams.get(prop),
                        });
       window.location.href = `ph.com.singlife.app://expo-development-client/?url=http%3A%2F%2F192.168.1.8%3A8081`;
//        window.location = `singlifeph://--/${params.screen}?action=${params.action}`;
        
       
    }
    
    function ifUrlExist(url, callback) {
    let request = new XMLHttpRequest;
    request.open('GET', url, false);
    request.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded; charset=UTF-8');
    request.setRequestHeader('Accept', '*/*');
    request.onprogress = function(event) {
        let status = event.target.status;
        let statusFirstNumber = (status).toString()[0];
        switch (statusFirstNumber) {
            case '2':
                request.abort();
                return callback(true);
            default:
                request.abort();
                return callback(false);
        };
    };
    request.send('');
};

    // Check DeepLink App Reachability
    function checkDeepLinkCanReach() {
//         ifUrlExist(`ph.com.singlife.app://expo-development-client/?url=http%3A%2F%2F192.168.1.8%3A8081`, (flag)=>{
//           if(flag){
//             appRedirection()
//           }else{
//             storeRedirection()
//           }
//         })
        appRedirection();
        setTimeout(storeRedirection, 5000)
        
    }

    checkDeepLinkCanReach();

</script>
